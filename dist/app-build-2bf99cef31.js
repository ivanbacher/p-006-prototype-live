System.register("app.html!github:systemjs/plugin-text@0.0.8.js",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",'<template>\n\n    <style type="text/css">\n        \n        #top {\n            position: absolute;\n            height: 50px;\n            border-bottom: 1px solid black;\n        }\n\n        code-editor {\n            position: absolute;\n\n            left: 350px;\n            right: 0px;\n            top: 0px;\n            bottom: 0px;\n        }\n\n        info-element {\n            position: absolute;\n\n            left: 0px;\n            width: 350px;\n            top: 0px;\n            height: 50px;\n        }\n\n        code-minimap {\n            position: absolute;\n\n            left: 0px;\n            width: 350px;\n            top: 50px;\n            bottom: 0px;\n        }\n\n        .CodeMirror {\n            font-size: 12pt;\n        }\n\n    </style>\n\n    <require from="./editor"></require>\n    <require from="./info"></require>\n    <require from="./minimap"></require>\n\n    <!--<div id="top"></div>-->\n\n    \n        \n        <code-editor></code-editor>\n        <info-element></info-element>\n        <code-minimap></code-minimap>\n\n    \n\n</template>')}}}),System.register("data/code_examples/sample_code_01.txt!github:systemjs/plugin-text@0.0.8.js",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",'<!DOCTYPE html>\n<html>\n    <head>\n        <title> TEST 1 </title>\n        <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">\n    </head>\n    <body>\n        <div class="container">\n            <div class="row">\n                <div class="col-xs-4">\n                    col-xs-4\n                </div>\n                <div class="col-xs-4">\n                    col-xs-4\n                </div>\n                <div class="col-xs-4">\n                    col-xs-4\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-xs-4">\n                    col-xs-4\n                </div>\n                <div class="col-xs-4">\n                    col-xs-4\n                </div>\n                <div class="col-xs-4">\n                    col-xs-4\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-xs-4">\n                    col-xs-4\n                </div>\n                <div class="col-xs-4">\n                    col-xs-4\n                </div>\n                <div class="col-xs-4">\n                    col-xs-4\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-xs-2">\n                    col-xs-2\n                </div>\n                <div class="col-xs-2">\n                    col-xs-2\n                </div>\n                <div class="col-xs-2">\n                    col-xs-2\n                </div>\n                <div class="col-xs-2">\n                    col-xs-2\n                </div>\n                <div class="col-xs-2">\n                    col-xs-2\n                </div>\n                <div class="col-xs-2">\n                    col-xs-2\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-xs-6">\n                    <div class="row">\n                        <div class="col-xs-6">col-xs-6</div>\n                        <div class="col-xs-6">col-xs-6</div>\n                    </div>\n                </div>\n\n                <div class="col-xs-4">\n                    <div class="row">\n                        <div class="col-xs-6">col-xs-6</div>\n                        <div class="col-xs-6">col-xs-6</div>\n                    </div>\n                </div>\n\n                <div class="col-xs-2">\n                    <div class="row">\n                        <div class="col-xs-6">col-xs-6</div>\n                        <div class="col-xs-6">col-xs-6</div>\n                    </div>\n                </div>\n                \n            \n            </div>\n\n        </div>\n    </body>\n</html>')}}}),System.register("data/code_examples/sample_code_02.txt!github:systemjs/plugin-text@0.0.8.js",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",'<!DOCTYPE html>\n<html>\n    <head>\n        <title> TEST 1 </title>\n        <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">\n    </head>\n    <body>\n        <div class="container">\n            <div class="row">\n                <div class="col-xs-4">\n                    col-xs-4\n                </div>\n                <div class="col-xs-4">\n                    col-xs-4\n                </div>\n                <div class="col-xs-4">\n                    col-xs-4\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-xs-6">\n                    col-xs-6\n                </div>\n                <div class="col-xs-6">\n                    col-xs-6\n                </div>\n            </div>\n        </div>\n    </body>\n</html>')}}}),System.register("data/code_examples/sample_code_03.txt!github:systemjs/plugin-text@0.0.8.js",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",'<!DOCTYPE html>\n<html>\n    <head>\n        <title> TEST 3 </title>\n        <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">\n    </head>\n    <body>\n        <div class="container">\n            <div class="row">\n                <div class="col-xs-4">\n                    col-xs-4\n                </div>\n                <div class="col-xs-4">\n                    col-xs-4\n                </div>\n                <div class="col-xs-4">\n                    col-xs-4\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-sm-4">\n                    col-sm-4\n                </div>\n                <div class="col-sm-4">\n                    col-sm-4\n                </div>\n                <div class="col-sm-4">\n                    col-sm-4\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-md-4">\n                    col-md-4\n                </div>\n                <div class="col-md-4">\n                    col-md-4\n                </div>\n                <div class="col-md-4">\n                    col-md-4\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-lg-4">\n                    col-lg-4\n                </div>\n                <div class="col-lg-4">\n                    col-lg-4\n                </div>\n                <div class="col-lg-4">\n                    col-lg-4\n                </div>\n            </div>\n        </div>\n    </body>\n</html>')}}}),System.register("app.js",["aurelia-framework","./services/log","aurelia-event-aggregator","./data/code_examples/sample_code_01.txt!text","./data/code_examples/sample_code_02.txt!text","./data/code_examples/sample_code_03.txt!text"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){d=a.inject,e=a.TaskQueue},function(a){f=a.log},function(a){g=a.EventAggregator},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default}],execute:function(){a("App",(k=d(g,e),m=k(l=function(){function a(b,d){c(this,a),this.eventAggregator=b,this.taskQueue=d}return a.prototype.attached=function(){var a=this;f.info("App attached"),this.taskQueue.queueMicroTask(function(){a.eventAggregator.publish("load_code",j)})},a}())||l)),a("App",m)}}}),System.register("editor.js",["aurelia-framework","aurelia-event-aggregator","./services/log","d3","CodeMirror","CodeMirror/mode/javascript/javascript.js","CodeMirror/lib/codemirror.css!css","CodeMirror/theme/monokai.css!css","CodeMirror/addon/fold/foldcode.js","CodeMirror/addon/fold/foldgutter.js","CodeMirror/addon/fold/brace-fold.js","CodeMirror/addon/fold/foldgutter.css!css","CodeMirror/addon/fold/comment-fold.js","CodeMirror/addon/fold/indent-fold.js","CodeMirror/addon/fold/markdown-fold.js","CodeMirror/addon/fold/xml-fold.js","CodeMirror/mode/htmlmixed/htmlmixed.js"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k,l,m,n;return{setters:[function(a){d=a.inject,e=a.noView,f=a.bindable},function(a){g=a.EventAggregator},function(a){h=a.log},function(a){i=a},function(a){j=a.default},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){}],execute:function(){a("CodeEditorCustomElement",(k=d(Element,g),l=e(),n=k(m=l(m=function(){function a(b,d,e){c(this,a),h.info("code-editor created"),this.element=b,this.eventAggregator=d,this.subs=[]}return a.prototype.attached=function(){var a=this;h.info("code-editor attached");var b=j(this.element,{mode:"text/html",theme:"monokai",lineNumbers:!0,foldGutter:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]});b.setSize("100%","100%"),b.on("change",function(c,d){h.info("codemirror change event");var e=b.getCursor(),f=b.indexFromPos(e);a.eventAggregator.publish("draw_001",{content:b.getValue(),index:f})}),b.on("cursorActivity",function(c){h.info("codemirror cursorActivity event");var d=b.getCursor(),e=b.indexFromPos(d),f={line:d.line,column:d.ch};a.eventAggregator.publish("cursorActivity",{pos:f,index:e})}),this.eventAggregator.subscribe("load_code",function(a){b.setValue(a)}),this.eventAggregator.subscribe("highlight_text",function(a){var c=b.posFromIndex(a.startIndex),d=b.posFromIndex(a.endIndex+1),e={css:"background-color: #D9AD00"},f=b.markText(c,d,e);setTimeout(function(){f.clear()},500)}),this.eventAggregator.subscribe("simulate_change",function(c){var d=b.getCursor(),e=b.indexFromPos(d);a.eventAggregator.publish("draw_001",{content:b.getValue(),index:e})})},a.prototype.detached=function(){h.info("code-editor detached");for(var a=this.subs,b=Array.isArray(a),c=0,a=b?a:a[Symbol.iterator]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{if(c=a.next(),c.done)break;d=c.value}var e=d;e.dispose()}},a}())||m)||m)),a("CodeEditorCustomElement",n)}}}),System.register("info.html!github:systemjs/plugin-text@0.0.8.js",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",'<template>\n\t<div class="container-fluid">\n\t\t<div class="row" style="margin-top: 8px;">\n\t\t\t<div class="col-xs-12">\n\t\t\t\t<div class="form-inline">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label class="control-label">Screen size:</label>\n\t\t\t\t\t\t<select class="form-control" value.bind="selection" change.delegate="change()">\n\t\t\t\t\t\t    <option value="xs">xs</option>\n\t\t\t\t\t\t    <option value="sm">sm</option>\n\t\t\t\t\t\t    <option value="md">md</option>\n\t\t\t\t\t\t    <option value="lg">lg</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>')}}}),System.register("info.js",["aurelia-framework","aurelia-event-aggregator","./services/log"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j;return{setters:[function(a){d=a.inject,e=a.bindable},function(a){f=a.EventAggregator},function(a){g=a.log}],execute:function(){a("InfoElementCustomElement",(h=d(Element,f),j=h(i=function(){function a(b,d,e){c(this,a),g.info("info-element created"),this.element=b,this.eventAggregator=d,this.subs=[],this.selection="xs",this.sizes={xs:767,sm:850,md:1e3,lg:1210}}return a.prototype.attached=function(){},a.prototype.change=function(){console.log(this.selection),this.eventAggregator.publish("change_frame_screen_size",this.sizes[this.selection])},a}())||i)),a("InfoElementCustomElement",j)}}}),System.register("main.js",["aurelia-framework","aurelia-logging-console","bootstrap"],function(a,b){"use strict";function c(a){a.use.standardConfiguration(),a.start().then(function(){return a.setRoot("app")})}var d,e;return a("configure",c),{setters:[function(a){d=a.LogManager},function(a){e=a.ConsoleAppender},function(a){}],execute:function(){d.addAppender(new e),d.setLevel(d.logLevel.debug)}}}),System.register("services/log.js",["aurelia-framework"],function(a,b){"use strict";var c,d;return{setters:[function(a){c=a.LogManager}],execute:function(){a("log",d=c.getLogger("insight")),a("log",d)}}}),System.register("parser.js",["htmlparser2","domutils"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f;return{setters:[function(a){d=a.default},function(a){e=a.default}],execute:function(){f=function(){function a(){c(this,a)}return a.prototype.parse=function(a){var b=new Promise(function(b,c){var e=new d.DomHandler(function(a,d){a?c(a):b(d)},{withStartIndices:!0,withEndIndices:!0}),f=new d.Parser(e,{recognizeSelfClosing:!0,decodeEntities:!0});f.write(a),f.done()});return b},a.prototype.getBody=function(a){var b=e.findOne(function(a){return"body"===a.name},a);return b},a.prototype.getDOMContents=function(a){var b=this.getBody(a),c=[],d=void 0;return d=b?b:{children:a,endIndex:1/0,name:"body",startIndex:-1,type:"tag"},this.traverse(d,0,function(a){c.push(a)}),c},a.prototype.traverse=function(a,b,c){"tag"===a.type&&(a.level=b,c(a));for(var d=a.children,e=Array.isArray(d),f=0,d=e?d:d[Symbol.iterator]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{if(f=d.next(),f.done)break;g=f.value}var h=g;"tag"===h.type&&(b++,this.traverse(h,b,c),b--)}},a}(),a("default",new f)}}}),System.register("minimap.js",["aurelia-framework","aurelia-event-aggregator","./services/log","./parser.js","d3","d3-scale-chromatic","THREE","three-orbit-controls","jquery"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){function c(){i.info(b+" - three world draw"),g.render(f,e)}function d(){i.info(b+" - world reset");for(var a=j.children.length-1;a>=0;a--)j.remove(j.children[a]),f.remove(j.children[a]);h.reset()}var e=void 0,f=void 0,g=void 0,h=void 0,j=new m.Object3D,k=a.clientWidth,l=a.clientHeight,n=l,o=k/l,p={viewSize:n,aspectRatio:o,left:-o*n/2,right:o*n/2,top:n/2,bottom:-n/2,near:.01,far:1e3};return e=new m.OrthographicCamera(p.left,p.right,p.top,p.bottom,p.near,p.far),e.position.set(0,0,500),f=new m.Scene,f.add(j),g=new m.WebGLRenderer({alpha:!0,antialias:!0,canvas:a}),g.setSize(a.clientWidth,a.clientHeight),h=new s(e,g.domElement),h.enableKeys=!1,h.addEventListener("change",c),{camera:e,scene:f,renderer:g,controls:h,group:j,draw:c,reset:d}}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return{setters:[function(a){e=a.inject,f=a.noView,g=a.bindable},function(a){h=a.EventAggregator},function(a){i=a.log},function(a){j=a.default},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a.default},function(a){o=a.default}],execute:function(){s=n(m),a("CodeMinimapCustomElement",(p=e(Element,h),q=f(),t=p(r=q(r=function(){function a(b,d,e){c(this,a),i.info("code-minimap created"),this.element=b,this.eventAggregator=d,this.subs=[]}return a.prototype.attached=function(){var a=this;i.info("code-minimap attached"),this.element.style.borderRight="1px solid #d0d0d0",this.canvas=k.select(this.element).append("canvas").style("display","block").attr("width",this.element.clientWidth).attr("height",this.element.clientHeight).style("background","#272823"),this.three_overview=d(this.canvas.node(),"OVERVIEW"),this.eventAggregator.subscribe("draw_001",function(b){i.info("code-minimap -- draw_001 event"),a.content=b.content,a.layout(b.content).then(function(c){a.three_overview.reset(),a.draw_overview(c),a.unhighlight_selected_node(),a.find_selected_node(b.index),a.highlight_selected_node(),a.three_overview.draw()})}),this.eventAggregator.subscribe("cursorActivity",function(b){i.info("code-minimap -- cursorActivity event"),a.unhighlight_selected_node(),a.find_selected_node(b.index),a.highlight_selected_node(),a.three_overview.draw()}),this.eventAggregator.subscribe("change_frame_screen_size",function(b){i.info("code-minimap -- change_frame_screen_size event"),a.frame_screen_size=b,a.eventAggregator.publish("simulate_change")})},a.prototype.detached=function(){i.info("code-minimap detached");for(var a=this.subs,b=Array.isArray(a),c=0,a=b?a:a[Symbol.iterator]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{if(c=a.next(),c.done)break;d=c.value}var e=d;e.dispose()}},a.prototype.layout=function(a){var b=this,c=this.frame_screen_size||767,d=document.createElement("iframe");d.style.width=c+"px",d.style.visibility="hidden",document.body.appendChild(d);var e=new Promise(function(c,e){d.contentWindow.document.open(),d.contentWindow.document.write(a),d.contentWindow.document.close();d.onload=function(){function a(b,c,d){var e=b.getBoundingClientRect(),f={w:e.width,h:e.height,x:e.x,y:e.y,name:b.localName,type:"tag",outerHTML:b.outerHTML,innerHTML:b.innerHTML,parent:c,children:[]};c&&c.children.push(f),d(f);for(var g=b.children,h=Array.isArray(g),i=0,g=h?g:g[Symbol.iterator]();;){var j;if(h){if(i>=g.length)break;j=g[i++]}else{if(i=g.next(),i.done)break;j=i.value}var k=j;a(k,f,d)}}o(d).contents().find("head").prepend("<style>body { margin:0; }</style>");var e=d.contentWindow.document.body,f=(d.contentWindow.document.documentElement,Math.max(e.scrollHeight,e.offsetHeight)),g=Math.max(e.scrollWidth,e.offsetWidth);b.frame_dim={width:g,height:f};var h=[];a(e,null,function(a){h.push(a)}),document.body.removeChild(d),c(h)}}),f=new Promise(function(b,c){j.parse(a).then(function(a){var c=j.getDOMContents(a);b(c)})});return Promise.all([e,f]).then(function(a){for(var b=a[0],c=a[1],d=0;d<b.length;d++)b[d].startIndex=c[d].startIndex,b[d].endIndex=c[d].endIndex,b[d].level=c[d].level,b[d].id=d;return b})},a.prototype.draw_overview=function(a){var b=30,c=30,d=30,e=30;this.three_overview.group.position.set(b,-d,0);for(var f=this.canvas.attr("width"),g=this.canvas.attr("height"),h=k.scaleLinear().domain([0,this.frame_dim.width]).range([0,f-(b+c)]).clamp(!0),i=k.scaleLinear().domain([0,this.frame_dim.height]).range([0,g-(d+e)]).clamp(!0),j=a,l=Array.isArray(j),n=0,j=l?j:j[Symbol.iterator]();;){var o;if(l){if(n>=j.length)break;o=j[n++]}else{if(n=j.next(),n.done)break;o=n.value}var p=o,q=new m.BoxGeometry(h(p.w),i(p.h),15),r=new m.MeshBasicMaterial({color:"#d0d0d0",wireframe:!1}),s=new m.Mesh(q,r),t=new m.EdgesGeometry(s.geometry),u=new m.LineBasicMaterial({color:"black",linewidth:2}),v=new m.LineSegments(t,u);s.userData=p,s.add(v);var w=new m.Vector3,x=h(p.x)/f*2-1,y=2*-(i(p.y)/g)+1;w.set(x,y,.5),w.unproject(this.three_overview.camera),s.position.set(w.x+h(p.w)/2,w.y-i(p.h)/2,20*p.level),this.three_overview.group.add(s)}},a.prototype.find_selected_node=function(a){for(var b=this.three_overview.group.children,c=Array.isArray(b),d=0,b=c?b:b[Symbol.iterator]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{if(d=b.next(),d.done)break;e=d.value}var f=e;f.material.transparent=!1;var g=f.userData;a>g.startIndex&&a<=g.endIndex&&(this.three_overview.selected_node=f)}},a.prototype.unhighlight_selected_node=function(){this.three_overview.selected_node&&(this.three_overview.selected_node.material.color=new m.Color("#d0d0d0"),this.three_overview.selected_node=null)},a.prototype.highlight_selected_node=function(){this.three_overview.selected_node&&(this.three_overview.selected_node.material.color=new m.Color("#D9AD00"),this.make_children_transparent())},a.prototype.make_children_transparent=function(){function a(b,c){for(var d=b,e=Array.isArray(d),f=0,d=e?d:d[Symbol.iterator]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{if(f=d.next(),f.done)break;g=f.value}var h=g;c(h),a(h.children,c)}}var b=this.three_overview.selected_node.userData.children,c={};a(b,function(a){c[a.id]=!0});for(var d=this.three_overview.group.children,e=Array.isArray(d),f=0,d=e?d:d[Symbol.iterator]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{if(f=d.next(),f.done)break;g=f.value}var h=g,i=h.userData;c[i.id]&&(h.material.transparent=!0,h.material.opacity=.5)}},a}())||r)||r)),a("CodeMinimapCustomElement",t)}}});